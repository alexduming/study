# Slides å›¾ç‰‡ OCR åŠŸèƒ½å®æ–½è¯´æ˜

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

**æ–°å¢åŠŸèƒ½ï¼š** Slides (AI PPT ç”Ÿæˆå™¨) é¡µé¢ç°åœ¨æ”¯æŒä¸Šä¼ å›¾ç‰‡å¹¶è‡ªåŠ¨è¯†åˆ«å…¶ä¸­çš„æ–‡å­—å†…å®¹ã€‚

### âœ¨ ä¸»è¦ç‰¹ç‚¹

- âœ… æ”¯æŒå¸¸è§å›¾ç‰‡æ ¼å¼ï¼šJPGã€PNGã€WEBPã€GIF
- âœ… ä½¿ç”¨ DeepSeek Vision AI è¿›è¡Œæ™ºèƒ½æ–‡å­—è¯†åˆ«ï¼ˆOCRï¼‰
- âœ… èƒ½ç†è§£å›¾ç‰‡ä¸­çš„æ–‡å­—ç»“æ„å’Œä¸Šä¸‹æ–‡
- âœ… ä¸ç°æœ‰çš„ PDFã€DOCXã€TXT è§£æåŠŸèƒ½æ— ç¼é›†æˆ
- âœ… ä¿æŒåŸæœ‰çš„æ–‡å­—ç»“æ„å’Œè¯­è¨€

## ğŸ¯ å®æ–½å†…å®¹

### 1. æ–°å¢å‡½æ•°

#### `parseImageAction` - å›¾ç‰‡æ–‡å­—è¯†åˆ«

**ä½ç½®ï¼š** `src/app/actions/aippt.ts`

**åŠŸèƒ½ï¼š**

- æ¥æ”¶å›¾ç‰‡æ–‡ä»¶ï¼ˆé€šè¿‡ FormDataï¼‰
- å°†å›¾ç‰‡è½¬æ¢ä¸º base64 æ ¼å¼
- è°ƒç”¨ DeepSeek Vision API è¿›è¡Œ OCR è¯†åˆ«
- è¿”å›æå–çš„æ–‡å­—å†…å®¹

**æŠ€æœ¯ç»†èŠ‚ï¼š**

```typescript
// ä½¿ç”¨ DeepSeek API çš„è§†è§‰èƒ½åŠ›
model: 'deepseek-chat';
messages: [
  {
    role: 'user',
    content: [
      { type: 'image_url', image_url: { url: imageDataUrl } },
      { type: 'text', text: 'è¯†åˆ«æŒ‡ä»¤' },
    ],
  },
];
```

**ä¼˜åŠ¿ï¼š**

- ä½¿ç”¨ç°æœ‰çš„ DeepSeek API Keyï¼Œæ— éœ€é¢å¤–é…ç½®
- æ™ºèƒ½è¯†åˆ«ï¼Œæ¯”ä¼ ç»Ÿ OCR æ›´å‡†ç¡®
- èƒ½ç†è§£å¤æ‚çš„æ–‡å­—æ’ç‰ˆå’Œç»“æ„

### 2. æ›´æ–°ç°æœ‰å‡½æ•°

#### `parseFileAction` - æ–‡ä»¶è§£æå¢å¼º

**æ›´æ–°å†…å®¹ï¼š**

- å¢åŠ å›¾ç‰‡æ ¼å¼æ£€æµ‹é€»è¾‘
- å½“æ£€æµ‹åˆ°å›¾ç‰‡æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ `parseImageAction`
- æ”¯æŒçš„å›¾ç‰‡æ ¼å¼ï¼š
  - MIME ç±»å‹ï¼š`image/*`
  - æ–‡ä»¶æ‰©å±•åï¼š`.jpg`, `.jpeg`, `.png`, `.webp`, `.gif`

**ä»£ç é€»è¾‘ï¼š**

```typescript
// æ£€æŸ¥æ˜¯å¦ä¸ºå›¾ç‰‡æ–‡ä»¶
const isImage =
  fileType.startsWith('image/') ||
  fileName.endsWith('.jpg') ||
  fileName.endsWith('.jpeg') ||
  fileName.endsWith('.png') ||
  fileName.endsWith('.webp') ||
  fileName.endsWith('.gif');

if (isImage) {
  // ä½¿ç”¨ AI OCR è¯†åˆ«
  extractedText = await parseImageAction(formData);
} else if (/* PDF/DOCX/TXT é€»è¾‘ */) {
  // ... ç°æœ‰é€»è¾‘ä¿æŒä¸å˜
}
```

### 3. å‰ç«¯ç•Œé¢æ›´æ–°

#### Slides é¡µé¢æ–‡ä»¶ä¸Šä¼ 

**ä½ç½®ï¼š** `src/app/[locale]/(landing)/slides/page.tsx`

**æ›´æ–°å†…å®¹ï¼š**

```typescript
// æ–‡ä»¶è¾“å…¥ accept å±æ€§æ›´æ–°
accept = '.pdf,.docx,.txt,.md,.jpg,.jpeg,.png,.webp,.gif,image/*';
```

#### å¤šè¯­è¨€æç¤ºæ›´æ–°

**ä¸­æ–‡æç¤ºï¼š** `src/config/locale/messages/zh/aippt.json`

```json
{
  "upload_hint": "ç‚¹å‡»ä¸Šä¼  PDF/DOCX/TXT/å›¾ç‰‡",
  "upload_subhint": "æˆ‘ä»¬å°†ä¸ºæ‚¨æå–æ–‡æœ¬ï¼ˆå›¾ç‰‡æ”¯æŒAIæ–‡å­—è¯†åˆ«ï¼‰"
}
```

**è‹±æ–‡æç¤ºï¼š** `src/config/locale/messages/en/aippt.json`

```json
{
  "upload_hint": "Click to upload PDF/DOCX/TXT/Image",
  "upload_subhint": "We'll extract the text for you (AI OCR for images)"
}
```

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### DeepSeek Vision API è°ƒç”¨æµç¨‹

1. **å›¾ç‰‡é¢„å¤„ç†**

   ```typescript
   const buffer = Buffer.from(await file.arrayBuffer());
   const base64Image = buffer.toString('base64');
   const imageDataUrl = `data:${mimeType};base64,${base64Image}`;
   ```

2. **API è°ƒç”¨**

   ```typescript
   POST https://api.deepseek.com/chat/completions
   Headers: {
     'Content-Type': 'application/json',
     'Authorization': `Bearer ${DEEPSEEK_API_KEY}`
   }
   Body: {
     model: 'deepseek-chat',
     messages: [...],
     temperature: 0.1,  // ä½æ¸©åº¦ç¡®ä¿å‡†ç¡®æ€§
     max_tokens: 4000
   }
   ```

3. **å“åº”å¤„ç†**
   ```typescript
   const extractedText = data.choices[0].message.content;
   return extractedText.trim();
   ```

### é”™è¯¯å¤„ç†

- âœ… æ–‡ä»¶æ ¼å¼éªŒè¯
- âœ… API è°ƒç”¨é”™è¯¯æ•è·
- âœ… è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•
- âœ… ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### ç”¨æˆ·æ“ä½œæµç¨‹

1. æ‰“å¼€ Slides é¡µé¢ï¼ˆ`/slides`ï¼‰
2. åˆ‡æ¢åˆ° "ä¸Šä¼ æ–‡ä»¶" æ ‡ç­¾
3. ç‚¹å‡»ä¸Šä¼ æˆ–æ‹–æ‹½å›¾ç‰‡æ–‡ä»¶
4. ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—
5. è¯†åˆ«ç»“æœå°†ä½œä¸º PPT å†…å®¹çš„è¾“å…¥
6. ç‚¹å‡» "å¼€å§‹åˆ†æ" ç»§ç»­ç”Ÿæˆ PPT

### æ”¯æŒçš„åœºæ™¯

âœ… **æ‰‹å†™ç¬”è®°ç…§ç‰‡** - è¯†åˆ«æ‰‹å†™æ–‡å­—å¹¶è½¬æ¢ä¸º PPT  
âœ… **ä¹¦æœ¬é¡µé¢** - æ‰«æä¹¦æœ¬ç« èŠ‚ï¼Œç”Ÿæˆå­¦ä¹  PPT  
âœ… **ç™½æ¿ç…§ç‰‡** - å°†ä¼šè®®ç™½æ¿å†…å®¹æ•´ç†æˆ PPT  
âœ… **æˆªå›¾æ–‡å­—** - æå–æˆªå›¾ä¸­çš„æ–‡å­—ä¿¡æ¯  
âœ… **æµ·æŠ¥/å®£ä¼ å•** - è¯†åˆ«æµ·æŠ¥æ–‡å­—å¹¶ç”Ÿæˆæ¼”ç¤º

## ğŸ“Š æ€§èƒ½è€ƒè™‘

### API æˆæœ¬

**DeepSeek Vision API å®šä»·ï¼š**

- çº¦ $0.01 - $0.02 / æ¬¡è¯†åˆ«ï¼ˆå–å†³äºå›¾ç‰‡å¤§å°ï¼‰
- æ¯”ä¸“é—¨çš„ OCR æœåŠ¡ï¼ˆå¦‚ Google Visionï¼‰æ›´ä¾¿å®œ
- ä¸”èƒ½æ›´å¥½åœ°ç†è§£ä¸Šä¸‹æ–‡

### å“åº”æ—¶é—´

- å¹³å‡è¯†åˆ«æ—¶é—´ï¼š2-5 ç§’
- å–å†³äºå›¾ç‰‡å¤§å°å’Œå†…å®¹å¤æ‚åº¦
- ä¸ PDF è§£æé€Ÿåº¦ç›¸å½“

### æ–‡ä»¶å¤§å°é™åˆ¶

- å»ºè®®å›¾ç‰‡å¤§å°ï¼š< 5MB
- æœ€å¤§æ”¯æŒï¼š10MBï¼ˆbase64 ç¼–ç åçº¦ 13.3MBï¼‰
- è¿‡å¤§çš„å›¾ç‰‡å¯èƒ½å¯¼è‡´è¶…æ—¶

## âš ï¸ æ³¨æ„äº‹é¡¹

### ç¯å¢ƒå˜é‡è¦æ±‚

ç¡®ä¿é…ç½®äº† DeepSeek API Keyï¼š

```bash
# .env.development æˆ– .env.production
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxx
```

### è¯†åˆ«å‡†ç¡®åº¦

- âœ… æ¸…æ™°çš„æ‰“å°æ–‡å­—ï¼šå‡†ç¡®åº¦ 95%+
- âœ… æ ‡å‡†æ‰‹å†™æ–‡å­—ï¼šå‡†ç¡®åº¦ 85%+
- âš ï¸ æ½¦è‰æ‰‹å†™æ–‡å­—ï¼šå‡†ç¡®åº¦å¯èƒ½è¾ƒä½
- âš ï¸ æ¨¡ç³Šç…§ç‰‡ï¼šå»ºè®®ç”¨æˆ·æä¾›æ¸…æ™°å›¾ç‰‡

### è¯­è¨€æ”¯æŒ

- âœ… ä¸­æ–‡ï¼ˆç®€ä½“/ç¹ä½“ï¼‰
- âœ… è‹±æ–‡
- âœ… æ—¥æ–‡ã€éŸ©æ–‡
- âœ… å¤§å¤šæ•°å¸¸è§è¯­è¨€
- ğŸ”„ è‡ªåŠ¨æ£€æµ‹è¯­è¨€ï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®š

## ğŸ§ª æµ‹è¯•å»ºè®®

### æµ‹è¯•åœºæ™¯

1. **æ¸…æ™°æ‰“å°æ–‡å­—**
   - ä¸Šä¼  PDF æˆªå›¾
   - éªŒè¯æ–‡å­—è¯†åˆ«å‡†ç¡®åº¦

2. **æ‰‹å†™ç¬”è®°**
   - ä¸Šä¼ æ‰‹å†™ç¬”è®°ç…§ç‰‡
   - æ£€æŸ¥è¯†åˆ«ç»“æœ

3. **æ··åˆå†…å®¹**
   - ä¸Šä¼ åŒ…å«å›¾è¡¨å’Œæ–‡å­—çš„å›¾ç‰‡
   - éªŒè¯åªæå–æ–‡å­—éƒ¨åˆ†

4. **ä¸åŒæ ¼å¼**
   - æµ‹è¯• JPGã€PNGã€WEBP ç­‰æ ¼å¼
   - ç¡®ä¿æ‰€æœ‰æ ¼å¼éƒ½èƒ½æ­£å¸¸å¤„ç†

5. **å¤§æ–‡ä»¶**
   - ä¸Šä¼  5MB+ çš„é«˜æ¸…å›¾ç‰‡
   - æµ‹è¯•æ€§èƒ½å’Œè¶…æ—¶å¤„ç†

### æµ‹è¯•å‘½ä»¤

```bash
# æœ¬åœ°å¼€å‘æµ‹è¯•
npm run dev

# è®¿é—®æµ‹è¯•é¡µé¢
http://localhost:3000/slides

# ä¸Šä¼ æµ‹è¯•å›¾ç‰‡å¹¶éªŒè¯è¯†åˆ«ç»“æœ
```

## ğŸ“ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰

1. **å›¾ç‰‡é¢„å‹ç¼©**
   - å‰ç«¯å‹ç¼©å›¾ç‰‡å†ä¸Šä¼ ï¼Œå‡å°‘ API è°ƒç”¨æ—¶é—´
   - èŠ‚çœå¸¦å®½å’Œæˆæœ¬

2. **è¿›åº¦æŒ‡ç¤º**
   - æ·»åŠ "æ­£åœ¨è¯†åˆ«å›¾ç‰‡..."çš„åŠ è½½æç¤º
   - æå‡ç”¨æˆ·ä½“éªŒ

3. **è¯†åˆ«ç»“æœé¢„è§ˆ**
   - åœ¨åˆ†æå‰æ˜¾ç¤ºè¯†åˆ«çš„æ–‡å­—
   - å…è®¸ç”¨æˆ·æ‰‹åŠ¨ä¿®æ­£

### ä¸­æœŸä¼˜åŒ–ï¼ˆ1-2æœˆï¼‰

1. **æ‰¹é‡è¯†åˆ«**
   - æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šå¼ å›¾ç‰‡
   - åˆå¹¶è¯†åˆ«ç»“æœ

2. **OCR ç¼“å­˜**
   - å¯¹ç›¸åŒå›¾ç‰‡ç¼“å­˜è¯†åˆ«ç»“æœ
   - å‡å°‘é‡å¤è°ƒç”¨

3. **è´¨é‡æ£€æµ‹**
   - è¯†åˆ«å‰æ£€æµ‹å›¾ç‰‡è´¨é‡
   - æç¤ºç”¨æˆ·å›¾ç‰‡è¿‡äºæ¨¡ç³Š

### é•¿æœŸä¼˜åŒ–ï¼ˆ3æœˆ+ï¼‰

1. **å¤šæä¾›å•†æ‰˜åº•**
   - DeepSeek å¤±è´¥æ—¶åˆ‡æ¢åˆ° Google Vision
   - æé«˜è¯†åˆ«æˆåŠŸç‡

2. **è¡¨æ ¼è¯†åˆ«**
   - è¯†åˆ«å›¾ç‰‡ä¸­çš„è¡¨æ ¼ç»“æ„
   - ä¿ç•™è¡¨æ ¼æ ¼å¼

3. **å…¬å¼è¯†åˆ«**
   - è¯†åˆ«æ•°å­¦å…¬å¼
   - è½¬æ¢ä¸º LaTeX æ ¼å¼

## ğŸ‰ æ€»ç»“

âœ… **åŠŸèƒ½å®Œæ•´** - å›¾ç‰‡ OCR å·²å®Œå…¨é›†æˆåˆ° Slides åŠŸèƒ½ä¸­  
âœ… **æŠ€æœ¯æˆç†Ÿ** - ä½¿ç”¨å¯é çš„ DeepSeek Vision API  
âœ… **ç”¨æˆ·å‹å¥½** - æ— éœ€é¢å¤–æ“ä½œï¼Œè‡ªåŠ¨è¯†åˆ«  
âœ… **æˆæœ¬å¯æ§** - ä½¿ç”¨ç°æœ‰ APIï¼Œæ— é¢å¤–è´¹ç”¨  
âœ… **æ‰©å±•æ€§å¼º** - å¯è½»æ¾æ·»åŠ æ›´å¤šå›¾ç‰‡å¤„ç†åŠŸèƒ½

ç°åœ¨ç”¨æˆ·å¯ä»¥ï¼š

- ğŸ“± æ‹ç…§åç›´æ¥ç”Ÿæˆ PPT
- ğŸ“š æ‰«æä¹¦æœ¬å†…å®¹åˆ¶ä½œå­¦ä¹ ææ–™
- ğŸ–¼ï¸ å°†ä»»ä½•å›¾ç‰‡ä¸­çš„æ–‡å­—è½¬æ¢ä¸ºæ¼”ç¤ºæ–‡ç¨¿

---

**å®æ–½æ—¶é—´ï¼š** 2025-12-17  
**å®æ–½äººå‘˜ï¼š** AI Assistant  
**æµ‹è¯•çŠ¶æ€ï¼š** âœ… ä»£ç å·²å®ç°ï¼Œå¾…ç”¨æˆ·æµ‹è¯•éªŒè¯

